<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>История запросов</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
</head>
<body>
<div>
  <nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark" aria-label="Main navigation">
    <div class="container-fluid">
      <a class="navbar-brand" href="/">Главная</a>
      <button class="navbar-toggler p-0 border-0" type="button" id="navbarSideCollapse" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="navbar-collapse offcanvas-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link"  href="task1">Задание 1</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="task2">Задание 2</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="requests_history">История запросов</a>
          </li>
        </ul>

      </div>
    </div>
  </nav>

</div>


<div>
  <h1>История запросов</h1>
  <table>
    <tr>
      <th>ID</th>
      <th>Время запроса</th>
      <th>Результат</th>
    </tr>
    <th:block th:each="entry : ${historyList}">
      <tr>
        <td th:text="${entry.id}"></td>
        <td th:text="${entry.requestTime}"></td>
        <td th:text="${entry.result}"></td>
      </tr>
    </th:block>
  </table>
</div>


<script>
  // Получение истории запросов с сервера
  fetch('/requestHistory')
      .then(response => response.json())
      .then(data => {
          // Отобразить историю запросов на странице
          const historyContainer = document.getElementById('historyContainer');
          data.forEach(request => {
              const historyItem = document.createElement('div');
              historyItem.innerText = `Число: ${request.number}, Результат: ${request.result}, Время запроса: ${request.requestTime}, Время ответа: ${request.responseTime}, Время выполнения: ${request.executionTime} мс`;
              historyContainer.appendChild(historyItem);
          });
      })
      .catch(error => {
          console.error('Ошибка:', error);
      });
</script>


</body>
</html>